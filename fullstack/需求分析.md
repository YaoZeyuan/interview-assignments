# 记录对需求的分析

1.  任务目标
    1.  提供两个 API
        1.  短域名存储接口：接受长域名信息，返回短域名信息
        2.  短域名读取接口：接受短域名信息，返回长域名信息。(注意, 只是提供转换 API, 不涉及实际跳转)
    2.  要求使用 TypeScript 实现, 期望不要过度设计，每一个依赖以及每一行代码都有足够充分的理由
2.  任务拆解
    1.  不使用数据库(可以减去 mysql/knex 依赖, 或 ioredis 依赖)
    2.  使用 Object 对数据进行存储, 方便未来 JSON 化
    3.  使用随机数作为 key. Number.MAX_SAFE_INTEGER => 9007199254740991, 理论可存千万亿条数据, 足够日常使用
        1.  为保证正确性, 可使用 JS 自带的进制转换函数 Number.prototype.toString 和 parseInt 执行数字和字符串间的转换, 虽然最大只能使用 36 进制(0-9, a-z), 但八位空间可以表达 2821109907455 个 url, 已足够应对千亿以下的应用场景. 将来扩展时, 替换转换函数即可(目前理论最大支持 2 万亿条记录, 但只要新增 2 位冗余数位, 即可在兼容前值情况下将规模再扩张 1000 倍)
        2.  如果之前进行过短网址转换, 则返回缓存下来的 key
        3.  key 可以通过随机数生成, 在 8 位字符, 36 进制时, 总容量为 2 万亿, 这意味着即使数据容量达到 1000 亿, 新增一个 key, 连续碰撞 5 次的概率只有不到 (1/10)^5, 万分之一, 可以接受.

# 开发步骤

1.  ✅ 实现第一版接口
2.  ✅ 参考已有 PR, 进行优化
    1.  ✅ 添加 API 单测功能
3.  提交 PR
